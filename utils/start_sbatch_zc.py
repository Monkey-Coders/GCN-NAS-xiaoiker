import json
import math
import subprocess

import numpy as np

path = "experiment"

# hashes = ["123"]
# if len(hashes) == 0:
#     with open(f"{path}/generated_architectures.json", "r") as f:
#         archis = json.load(f)
#     for model_hash, model in archis.items():
#         if "zero_cost_scores" not in model:
#             hashes.append(model_hash)
#             continue
#         if any(math.isnan(val["time"]) for val in model["zero_cost_scores"].values()):
#             hashes.append(model_hash)
#             continue
        
#         for i in range(0, 10):
#             if f"zero_cost_scores_{i}" not in model:
#                 hashes.append(model_hash)
#                 break
#             if any(math.isnan(val["time"]) for val in model[f"zero_cost_scores_{i}"].values()):
#                 hashes.append(model_hash)
#                 break

hashes = {'7bb3cdda69381c2af92a234d8ad0d9b04a31d6f94c88ff2baa981cb76285b51e': ['epe_nas'], '4d71ade47a068014b793b4dcb000e82f954c16a1216c61888783615d451dcc77': ['epe_nas'], '511540229306c35335e53702510f27dbda671e13eb46bd2942b3ef783d746e46': ['epe_nas'], '289338116e50948b3c632693c6f4e6561a6c3b4020da876b82f916174712375a': ['epe_nas'], '6588ce9917f125a2f13cd2f8dca0666eb70ade4451edb7828119c583d5bcb865': ['grasp'], '099e8fe1aa89682d4da962cf651993ce58b100ca90f71f7f88d7f0e19c9eaedf': ['grasp'], '54dceec86db6340203703e05e689104444dd254dac67a39633d0d626fe633d91': ['grasp'], '082b31e99423c5c6cff4f0ad9279403d63cbe795c62919d11d625d08a9fbd38a': ['grasp'], '4decd4f3c394dd0452313251a929349086b3e19477fdf92d68d1e41610c2317e': ['grasp'], '1fb00bfbd67af0da7437d1b8e735370c50ba526ef045dd51a9ddb51fe3234c27': ['grasp'], '8830064e1662449530aa5ddea5f2c1079caaa11f3d4bdb2e83aa82e0536847ae': ['grasp'], '0c02ec0b16621fde302795fede69d8bab7cd3d4e33a2346e32095b6214fb5c0d': ['grasp'], '7476cae90b7c950797f2c8caf818daf1cbdb528307c2a6872578e7b15d317753': ['grasp'], 'cd42ffb0e1e6d71b04f09a7f14a43361175d7ef9b13624d3285f76d00e4a5c29': ['grasp'], '89a68257ae66a2480c7dcdb5c100fb0c3d5ae428fb3dd2efb81fa9f44ba54aad': ['grasp'], '514238f5da04651ecbb694b0f09d7fabc0a9efd81676cde77d53f95374842a15': ['grasp'], 'bd7b084857c3ffaaafb646bd708eecd98065bdf50cab27e7d64d1926f4d52e38': ['epe_nas'], '035346d6bdbad167bc25a9ba209e857fb54a84b24177630bb2c984fe020ad8d9': ['epe_nas'], 'd3f65c36587c811d1066978d410f61370f6d42b818b8ef06878a934900868b9f': ['epe_nas'], 'ddcc4f8e555e8f67dbc8c5e09c293a3e04a400c0f200664ec6f16211929420ac': ['epe_nas'], '38df40fb57b745622fdc47517e0d754f51a8b52ef2b86ff0a89835ed2a1ba868': ['epe_nas'], 'df75eb3f6344acb479301f74d37477687a26dccd6c18c9ac2be9d00cf187ab9e': ['epe_nas'], 'd9f870ab6b8f23704d5ec2a5036d99925fc2a99bcb5e51aa48968e705ed5fa9c': ['epe_nas'], 'd48a21e55225c30fecfe54ab305587e360caf7dfcf14b8cef8a2de8e3623fff8': ['epe_nas'], 'f22cdbf14175e58da228813a87266efc457a9ec7159a5209df13a2e1d4c4ae25': ['epe_nas'], 'fe4ca86947eab80cf5448f1b7bd92e7f0041bf7d8588696684b99c0f3d561742': ['epe_nas'], 'f558bd335e94d2706c93c76d774b624aebd8e52fb5e4a42ac91e9c0a1280e18d': ['epe_nas'], 'f9b3353534f31d1b2a7cf49036318fd4d9d73e0d8dcf12a441dc67d8cd2a0413': ['grasp', 'jacov', 'nwot', 'epe_nas'], '15fa69d75de94cd82f1ec7b4b5663ee57103057f683eea5f9652d4cc619eb914': ['jacov', 'nwot', 'epe_nas'], '386077540acbc93dadede659f93d8c20faf6228d5b3ebe8f3f8affbecba9511c': ['epe_nas'], '20abd7bef980d37075fb86fd6a92d6efc9385c88840d5b1b0fa89894e62723b0': ['epe_nas'], '742545d03e4b29a67d7a0e2a9d0c3874a0983ea38f9f74493b51ed3c77c6a7f5': ['epe_nas'], '4e4545008b4075fd26a8e9f087ac3399ceb2306d775dfab20bbe601b8682634e': ['epe_nas'], '914291ffe609564789dbf810f14eb14e4541500be6a4eb60fa0b98e24051dba3': ['epe_nas'], '2c76067fb3dc44d7f26e6d3cbfa3258c7e121bb3bfd92682371d5bf5b553da02': ['epe_nas'], 'aaa4d2419e94715ce06cd712142846d44e1a3b78449f5be1665fbf1ceb59d2fd': ['epe_nas'], '4d71801274ec7f7de9c5be6f53b51ff2f5f1fa912fb0119502533b585d0d5473': ['epe_nas'], '580ebefe2f5e0a299587ed76893e3aa2a9ab8f518ac1fdf021aeb7e2cabe45fd': ['epe_nas'], '24994f88919cadba5a67f2a518c77e4000d8021aa7899b650dafbd775f6b64e3': ['epe_nas'], '2b53452f00956c1a1dd264e5ac539062f44fbbddc77f795268a061f8165bc3af': ['epe_nas'], 'c37030b918f19b0267d96361ea43ec62b942aa13554be2bcb50e65026abe8903': ['epe_nas'], '876c36b37b84b486b219dfedd03e5024741c7f75adb9dc280044e35fbcc74e9a': ['epe_nas'], '749199bce74582fe5acf19a0b9a2ab54a46db57d81f2f2b241d226d9c27dac85': ['epe_nas'], '33b8d1ca57a0848ddbd09456b521d605a0fab9e3590bcb9fe33443db66967e22': ['epe_nas'], '1a19fb42f76c6a8a94ee5f3f1fe4d33089104521e93f702a9f3e0a89c266ed5c': ['epe_nas'], 'b0388738635977ef06c8b2f7aba4b3b90d41e3c279064a0780349eee27dc22e4': ['epe_nas'], '2ffa096dc8f3004fd169937b05c3c1dea9e0200457c7779d9b7ae1a3315e2148': ['epe_nas'], '73c9cfbfa3fa4bd3efad5cb742401a46a739c5af8c3ad9875f96ebe862040ca4': ['epe_nas'], '0f3a80c6275547baeb642866f349e55ee29b514c442f1c187b66119861002e93': ['epe_nas'], '4548bbf3299d173460be1af979ce1fdaaa1c5d68b195aea77c0a3589ed0468a8': ['epe_nas'], 'bc10735bd0faa99f733a210af8782adc08890b1af9d6e713f720eae78871f38d': ['epe_nas'], 'c3b8168bd5886d86a057f00ca6cbdb726663a96a943685d06011b812facc7394': ['epe_nas'], '7d5d256beafd15cb88d57fdb6548ed30112e9f68880640d9f02d9cf49471ef6e': ['epe_nas'], '63e3ac3e72b5061aac35c19ba0de700ab5b2c56067eb50a624a1a71423d08648': ['epe_nas'], '93211ef080614404ae1283bf2049bf6a7c68ed650eccc445f0d168e7b955409f': ['epe_nas'], '62fd4118e9263a55178a38c35f095e6c15724d1266db0e398716d4b89b729e42': ['epe_nas'], '8356a9e800c28121fcf531d22d1a8d274698c1aeaa1a4002d671445c26973309': ['jacov', 'nwot', 'epe_nas'], '00c8b5f3863c9586d0283958e34dfe5fc1ed4d71f64798034f9c85330ec1ccdb': ['epe_nas'], '1de0b53d709c23b0edab62db2c47360fa4fd6de9aaf35f93ecbfe385781e6d34': ['epe_nas'], '9e5fe07ca46d13294c4e6f19a1d901b74063915535d052d0dc1bda63d28d3147': ['jacov', 'nwot', 'epe_nas'], '227f92f31ad4ceb6bfaf05577adb991d618c9c252f9be043037525fd220eb8dd': ['jacov', 'epe_nas', 'plain', 'nwot'], '72acef1c1bc1302b5a3b06255d5fc4624e8f521e756db741aeca162afa20c168': ['epe_nas'], '7fd9dadc93fe93072dff9c93aaab4e257d44c714226237b56cdfa506aaf4f20b': ['jacov', 'epe_nas', 'plain', 'nwot'], '7668ada3a09d48a3cf9961aa40ac3e6f51314875696ba04a92b849f0a98d6643': ['epe_nas'], 'ca0aa440154ef9d53cc8f36f7013508024e0d006395d526fbb0cf6653a1bdcac': ['epe_nas'], '62e3e3d45dc00e211ac4b0b3a9d1202cf9b1775cf05d42e1014b663d01db0280': ['jacov', 'nwot', 'epe_nas'], 'b9bf620dd9a2d22b2333f686a2ae4826b81c95bc7d7665d17f53dbdcaaea4c5c': ['epe_nas'], '263120b1335eed589fb201719144a657805824d40d604ae11a42083db0187b40': ['jacov', 'epe_nas', 'plain', 'nwot'], '5ca88e75903909f310745244649f11dcbb456abd12d7a95f588deb76f47f2fc5': ['jacov', 'epe_nas', 'plain', 'nwot'], '6715b03c3c8639ed14f7ab32a45ac12c516de50905d1e2efe5bab6d029a4f840': ['epe_nas'], '3109f85610cafc50df9d40493d124de9e2b9bf221c8a06aea4b75fe40e7ea4ef': ['epe_nas'], '28f7d30c829200093b3125b10562bbda8c49f1320b90e08d8df4dc7d34078c4f': ['jacov', 'nwot', 'epe_nas'], '8c8a7607a030b03fd81780a7f174266c1971e974939f837c56b80acb501d35fb': ['epe_nas'], '804641e8da0429990441736f1380867e4611b396b38d29c0a0ebd36bd6f9abc8': ['jacov', 'nwot', 'epe_nas'], '039c3c4cad5ac7b4c4b99a404345efc2a39bebfc32d530277ae4a4eb4b7334cb': ['epe_nas'], '4b6d7c475b9e5ee549c30b1b681eef71883e769340092feb08acd66e531baed4': ['epe_nas'], 'ffa598d606cb6ab36b6992b8ce846f9d342eadad1a0eac7d0f8f5cfa712eef54': ['jacov', 'nwot', 'epe_nas'], '24b9aec990d8048efb93922d26b6135f7c6bff0fe2b11462915def71c90bf6ac': ['jacov', 'epe_nas', 'plain', 'nwot'], '317cf9b369d21edb214a91138ad05070a4670ed11799a0df562c56ebea262324': ['epe_nas'], '8f35af3f5d8c258760870be895d60386802d1b5a46abbf951188d261ed53e9bd': ['jacov', 'nwot', 'epe_nas'], '82def4b8803b2b8ff83168ebb0a1acd6861de28278a102d5fb60f2bfc12c3c64': ['grasp', 'epe_nas'], '70f9d9c9cea8b5f255d89311728d2e10f86ecbd7488659272a6d06a92477abc2': ['epe_nas'], '83ee2fae6c1794cfaa1117a44c2631dccd72d894c9483085dfd03e528317d2a3': ['jacov', 'nwot', 'epe_nas'], 'dfaadefa1cd830cd3fd1762c314510bb47f00b07034d169a63ec56829a274c68': ['jacov', 'nwot', 'epe_nas'], '9e6ab6f6482afb8d1b044cb12c8778732ee5227736ceb226aa1ce6e87ea8703f': ['epe_nas'], '40147039e55b82fc8a0f2d3653037ee3a93c8929800298bcef52c8928756fb03': ['jacov', 'nwot', 'epe_nas'], '3a3be59d3b9a83aa98447fba6d2bc2f0f6a6a78c31346336381fdfbfcaeb6aa8': ['epe_nas'], '5862e521fc3c8bb5e3ac0efeb14f42c1dcd5208c67ec77ced443618d335c335c': ['jacov', 'nwot', 'epe_nas'], 'bb1e2222f2765967140e8ef47c7901c76725a5ed3d92a17a989c6968356672dd': ['epe_nas'], '45729219d892ad9bc783b932b34b75e1bd6fa6081720f444803cec41d0131920': ['jacov', 'nwot', 'epe_nas'], 'a87ccc6415044de18c29373455a308b82447b6cf517abd561b71fc4e98df748b': ['epe_nas'], '4161eca593e0420e5c7f983d8cdf13a564eac3089d12e51651497ac572fa6d91': ['epe_nas'], 'a4e7051ab78027e7d80eb5e4f6dcedc5bfd9bab19b8b7dc928231a75d41a735c': ['jacov', 'epe_nas', 'plain', 'nwot'], '826e7161e0e25e02072abfc6e3dbd618c2a18da786b73c0fe9a45f4eec23aa7d': ['epe_nas'], '26e132d81c288d02902127ecac1866291b2823d5d58cd2460f7bb6a3685a26b7': ['jacov', 'nwot', 'epe_nas'], 'aa4b77628960b6956e41a1d7123a461ab0dc1cd0b8e400cd3aea6009f13a8c2a': ['jacov', 'nwot', 'epe_nas'], '54a115b6e022f9a8fbcc5582fdecc95c56f22802faaeb52a453a13eaf8965e9f': ['jacov', 'nwot', 'epe_nas'], '9c4746eeb003fad4aaaba76ce726d52ae94a543adde80606009ce796a1979402': ['epe_nas'], '01da45f13ad8177219f15330e0c7d8061452453c8f6c2f9150e0a2cd4e86e72f': ['epe_nas'], '2d2bfcf645ceadfadf9791f16cf413c338f5a7ecc1bb448a02331824fc572f65': ['epe_nas'], 'b3e791ee06f7f591756b193fc2775333722f551ad2f122d2374c5058bfb0b5df': ['epe_nas'], '5a24d09e0c84977d09e10b3fcdbe7380f5b05cecd09c8d2c37e2b4251c165e0a': ['epe_nas'], '9823adcdda32b33ff3ef2c67e804ac89523a7eac4a2e5663026020218fa1deff': ['epe_nas']}
for hash_value, methods in hashes.items():
    free = '|'.join(methods)
    sbatch_cmd = f"sbatch --export=model_hash={hash_value},overide={free} --job-name=zc-{hash_value} --output=output/zc-{hash_value}.out zzz_slurm/zc.slurm"
    subprocess.call(sbatch_cmd.split())
